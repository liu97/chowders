<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>基本地图展示</title>
    <link rel="stylesheet" href="../static/main1119.css"/>
    <script src="../static/es5.min.js"></script>
    <script src="http://webapi.amap.com/maps?v=1.4.4&key=9666dcc5bbcad91278775d59f22a1543"></script>
    <script type="text/javascript" src="../static/addToolbar.js"></script>
</head>
<body>
<div id="container"></div>

<script>
	var x=document.getElementById("container");
	window.onload=function () {
		getPosition();
        var time = window.setInterval(getPosition,10000)
	}
    function getPosition() {
        if(navigator.geolocation){

            navigator.geolocation.getCurrentPosition(showPosition,showError)
        }
        else{
            x.innerHTML="该浏览器不支持定位。";
        }
    }
	function showPosition(position) {
		var map = new AMap.Map('container', {
		    resizeEnable: true,
		    zoom:16,
		    center: [position.coords.longitude, position.coords.latitude]
		});
        new AMap.Marker({
            map: map,
            position: [position.coords.longitude, position.coords.latitude], //图标对应的点
            icon: new AMap.Icon({            
                size: new AMap.Size(40, 50),  //图标大小
                image: "http://webapi.amap.com/theme/v1.3/images/newpc/way_btn2.png", //图标
                imageOffset: new AMap.Pixel(0, -60) //图标偏移
            })        
        });
	}
    function showError(error)
    {
    	switch(error.code) 
    	{
    		case error.PERMISSION_DENIED:
    			x.innerHTML="用户拒绝对获取地理位置的请求。"
    			break;
    		case error.POSITION_UNAVAILABLE:
    			x.innerHTML="位置信息是不可用的。"
    			break;
    		case error.TIMEOUT:
    			x.innerHTML="请求用户地理位置超时。"
    			break;
    		case error.UNKNOWN_ERROR:
    			x.innerHTML="未知错误。"
    			break;
    	}
    }

</script>
</body>
</html>